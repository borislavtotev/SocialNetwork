<div class="posts col-lg-12" ng-repeat="post in postsData">
    <div class="col-lg-12 col-sm-4">
        <div class="panel panel-info" id="{{post.id}}">
            <div class="panel-heading">
                <div class="dropdown" ng-controller="AuthenticationController">
                    <img class="dropdown-toggle profilePicture img-rounded" data-toggle="dropdown" href="" aria-expanded="false" ng-mouseover="showUserPreviewData(post.author.username)" ng-src="{{ post.author.profileImageData || 'http://www.clker.com/cliparts/5/7/4/8/13099629981030824019profile.svg.med.png'}}" />
                    <div class="dropdown-menu dropdown-settings" ng-include="'templates/partial/friendPreview.html'"></div>
                    <span>{{ post.author.name }}</span><br/>
                </div>
                <span>{{ post.date  | date:'d MMM yyyy' }}</span>
                <span>{{ post.date  | date:'HH:mm:ss' }}</span>
                <div ng-controller="PostController">
                    <button class="btn btn-primary" ng-if="!postEditorEnabled && userData.name == post.author.name" ng-click="editPost(post)"><i class="fa fa-edit "></i> Edit</button>
                    <button class="btn btn-danger" ng-if="!postEditorEnabled && userData.name == post.author.name" ng-click="deletePost(post)"><i class="fa fa-pencil"></i> Delete</button>
                </div>
            </div>
            <div class="panel-body" ng-controller="PostController">
                <p ng-if="!postEditorEnabled">{{ post.postContent}}</p>
                <textarea ng-if="postEditorEnabled" ng-model="post.postContent"></textarea>
                <button class="btn btn-success" ng-if="postEditorEnabled" ng-click="saveUpdatedPost(post)">Save</button>
                <button class="btn btn-default" ng-if="postEditorEnabled" ng-click="cancelEditPost()">Cancel</button>
            </div>
            <div class="panel-footer" ng-controller="PostController">
                <button class="btn btn-default" ng-disabled="post.liked || (currentUser.username == userData.username ? false : !currentUser.isFriend ) || ( userData.username == post.author.username ? false : !post.author.isFriend )" ng-click="likePost(post)"><span class="glyphicon glyphicon-thumbs-up"></span></button>
                Likes: {{ post.likesCount}}
                <button class="btn btn-default" ng-disabled="!post.liked || (currentUser.username == userData.username ? false : !currentUser.isFriend ) || ( userData.username == post.author.username ? false : !post.author.isFriend )" ng-click="unlikePost(post)"><span class="glyphicon glyphicon-thumbs-down"></span></button>
                Comments: {{ post.totalCommentsCount }}
                <button class="btn btn-info" ng-click="addComment()" ng-controller="PostController"><span class="glyphicon glyphicon-comment"></span> &nbsp;Comment</button>
            </div>
        </div>
    </div>
    <div class="col-lg-12 col-sm-4 comments" ng-if="addCommentEnabled" ng-controller="PostController">
        <div class="panel panel-warning newComment" id="{{post.id + 'NewComment'}}">
            <div class="panel-heading">
                New Comment
            </div>
            <div class="panel-body">
                <textarea ng-model="newComment.content"></textarea>
            </div>
            <div class="panel-footer">
                <button class="btn btn-success" ng-click="saveNewComment(post)">Save</button>
                <button class="btn btn-default" ng-click="cancelNewComment()">Cancel</button>
            </div>
        </div>
    </div>
    <div class="col-lg-12 col-sm-4 comments">
        <div class="panel panel-warning" ng-repeat="comment in post.comments" id="{{comment.id}}">
            <div class="panel-heading">
                <img ng-src="{{ comment.author.profileImageData || 'http://www.clker.com/cliparts/5/7/4/8/13099629981030824019profile.svg.med.png'}}" class="profilePicture img-rounded" />
                <span>{{ comment.author.name }}</span><br/>
                <span>{{ comment.date  | date:'d MMM yyyy' }}</span>
                <span>{{ comment.date  | date:'HH:mm:ss' }}</span>
                <div ng-controller="PostController">
                    <button class="btn btn-primary" ng-if="userData.name == comment.author.name" ng-click="editComment()"><i class="fa fa-edit "></i> Edit</button>
                    <button class="btn btn-danger" ng-if="userData.name == comment.author.name" ng-click="deteleComment()"><i class="fa fa-pencil"></i> Delete</button>
                </div>
            </div>
            <div class="panel-body">
                <p>{{ comment.commentContent}}</p>
            </div>
            <div class="panel-footer">
                Likes: {{ comment.likesCount}}
            </div>
        </div>
        <div ng-if="post.comments.length >= 3" ng-controller="PostController" class="moreComments" id="{{post.id + 'showMoreCommentsButton'}}">
            <button class="btn btn-default"  ng-click="showAllComments(post)"><span class="glyphicon glyphicon-collapse-down"></span> &nbsp;Show All Comments</button>
        </div>
    </div>
</div>